import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';

interface TranslationContextType {
  language: string;
  setLanguage: (lang: string) => void;
  t: (key: string) => string;
}

const TranslationContext = createContext<TranslationContextType | undefined>(undefined);

// Comprehensive translation data for all sections
const translations: Record<string, Record<string, string>> = {
  english: {
    // Navigation
    'nav_news': 'News',
    'nav_products': 'Products',
    'nav_community': 'Community',
    'nav_profile': 'Profile',
    'nav_scanner': 'Scanner',
    
    // Home
    'latest_news': 'Latest News',
    'featured_products': 'Featured Products',
    'view_all': 'View All',
    'read_more': 'Read More',
    'welcome': 'Welcome',
    'dashboard': 'Dashboard',
    'search_news': 'Search news...',
    'todays_weather': "Today's Weather",
    'choose_your_date': 'Choose Your Date',
    'pick_a_date': 'Pick a date',
    'date_range': 'Date range',
    'trending_topics': 'Trending Topics',
    'welcome_to_gemini': 'Welcome To Gemini',
    'latest_insights': 'Latest news and insights for Filipino farmers',
    
    // Products
    'products': 'Products',
    'our_products': 'Our Products',
    'search_products': 'Search products...',
    'search_products_placeholder': 'Search products (e.g., fertilizer, organic, pest control)...',
    'all_categories': 'All Categories',
    'price_range': 'Price Range',
    'apply_filters': 'Apply Filters',
    'clear_filters': 'Clear Filters',
    'add_to_cart': 'Add to Cart',
    'view_details': 'View Details',
    'filters': 'Filters',
    'relevance': 'Relevance',
    'price_low_high': 'Price: Low to High',
    'price_high_low': 'Price: High to Low',
    'highest_rated': 'Highest Rated',
    'most_reviewed': 'Most Reviewed',
    'in_stock_only': 'In stock only',
    'premium_solutions': 'Premium agricultural solutions for Filipino farmers',
    'need_help': 'Need Help?',
    'contact_technician': 'Contact our field technicians for product recommendations',
    'talk_to_technician': 'Talk to a Technician',
    'out_of_stock': 'Out of Stock',
    'low_stock': 'Low Stock',
    'items_left': 'items left',
    'no_products_found': 'No products found',
    'try_different_search': 'Try a different search or filter',
    'field_technicians': 'Field Technicians',
    'call_technician': 'Call Technician',
    'region': 'Region',
    
    // Forum
    'community_forum': 'Community Forum',
    'create_post': 'Create Post',
    'search_posts': 'Search posts...',
    'post_title': 'Post Title',
    'write_content': 'Write your content here...',
    'publish': 'Publish',
    'like': 'Like',
    'comment': 'Comment',
    'reply': 'Reply',
    'share': 'Share',
    'delete': 'Delete',
    'edit': 'Edit',
    'write_a_comment': 'Write a comment...',
    'posting': 'Posting...',
    'post': 'Post',
    'comments': 'Comments',
    'no_posts': 'No posts yet',
    'be_first_to_post': 'Be the first to share something with the community!',
    'share_post': 'Share this post',
    'copy_link': 'Copy Link',
    'link_copied': 'Link copied to clipboard!',
    'add_images': 'Add Images',
    'whats_on_your_mind': "What's on your mind?",
    'share_thoughts': 'Share your thoughts, questions, or tips with the farming community',
    'pull_to_refresh': 'Pull to refresh',
    'refreshing': 'Refreshing...',
    'add_reaction': 'Add reaction',
    'view_comments': 'View comments',
    
    // Plant Scanner
    'plant_scanner': 'Plant Scanner',
    'scan_plant': 'Scan Plant',
    'take_photo': 'Take Photo',
    'upload_image': 'Upload Image',
    'analyze': 'Analyze',
    'disease_detection_results': 'Disease Detection Results',
    'treatment_recommendations': 'Treatment Recommendations',
    'recommended_products': 'Recommended Products',
    'scan_credits': 'Scan Credits',
    'credits_remaining': 'credits remaining',
    'buy_more_credits': 'Buy More Credits',
    'scanning': 'Scanning...',
    'analyzing_plant': 'Analyzing your plant...',
    'scan_history': 'Scan History',
    'no_scans_yet': 'No scans yet',
    'start_scanning': 'Start by scanning a plant to detect diseases',
    
    // Profile
    'profile': 'Profile',
    'edit_profile': 'Edit Profile',
    'save_profile': 'Save Profile',
    'favourites': 'Favourites',
    'downloads': 'Downloads',
    'language': 'Language',
    'location': 'Location',
    'display': 'Display',
    'feed_preference': 'Feed Preference',
    'subscription': 'Subscription',
    'clear_cache': 'Clear Cache',
    'clear_history': 'Clear History',
    'log_out': 'Log Out',
    'admin_dashboard': 'Admin Dashboard',
    'member_since': 'Member Since',
    'current_streak': 'Current Streak',
    'days': 'days',
    'earned_points': 'Earned Points',
    'points': 'points',
    'achievements': 'Achievements',
    'activity': 'Activity',
    'biometric_login': 'Biometric Login',
    'enable_biometric': 'Enable Face ID/Fingerprint',
    'disable_biometric': 'Disable Biometric',
    'rate_app': 'Rate App',
    'help_centre': 'Help Centre',
    'privacy_policy': 'Privacy Policy',
    
    // Settings
    'settings': 'Settings',
    'theme': 'Theme',
    'dark_theme_active': 'Dark theme active',
    'light_theme_active': 'Light theme active',
    'following_system': 'Following system',
    'light': 'Light',
    'dark': 'Dark',
    'system': 'System',
    'select_app_language': 'Select app language',
    'notifications': 'Notifications',
    'manage_alert_preferences': 'Manage alert preferences',
    'order_updates': 'Order Updates',
    'promotions': 'Promotions',
    'community_alerts': 'Community Alerts',
    'news_updates': 'News Updates',
    'privacy_security': 'Privacy & Security',
    'manage_your_data': 'Manage your data',
    'data_encrypted': 'Data encrypted at rest',
    'secure_connection': 'Secure connection (SSL)',
    'two_factor_available': 'Two-factor authentication available',
    'account_management': 'Account Management',
    'manage_your_account': 'Manage your account',
    'app_version': 'App Version',
    
    // News
    'news': 'News',
    'latest_updates': 'Latest Updates',
    'read_full_article': 'Read Full Article',
    'related_articles': 'Related Articles',
    'share_article': 'Share Article',
    'views': 'views',
    'min_read': 'min read',
    
    // Cart & Checkout
    'cart': 'Cart',
    'your_cart': 'Your Cart',
    'cart_empty': 'Your cart is empty',
    'add_products_to_start': 'Add some products to get started',
    'continue_shopping': 'Continue Shopping',
    'checkout': 'Checkout',
    'subtotal': 'Subtotal',
    'shipping': 'Shipping',
    'shipping_fee': 'Shipping Fee',
    'free': 'Free',
    'total': 'Total',
    'place_order': 'Place Order',
    'payment_method': 'Payment Method',
    'cash_on_delivery': 'Cash on Delivery',
    'gcash': 'GCash',
    'bank_transfer': 'Bank Transfer',
    'shipping_address': 'Shipping Address',
    'delivery_address': 'Delivery Address',
    'order_notes': 'Order Notes',
    'delivery_notes': 'Delivery Notes (Optional)',
    'delivery_instructions': 'Add any special delivery instructions...',
    'apply_voucher': 'Apply Voucher',
    'voucher_code': 'Voucher Code',
    'enter_voucher_code': 'Enter voucher code (e.g., 1.1, 2.2, WELCOME10)',
    'apply': 'Apply',
    'remove': 'Remove',
    'quantity': 'Quantity',
    'qty': 'Qty',
    'select_all': 'Select All',
    'items_selected': 'items selected',
    'clear_all': 'Clear All',
    'proceed_to_checkout': 'Proceed to Checkout',
    'order_summary': 'Order Summary',
    'street_house_number': 'Street/House Number',
    'enter_street': 'Enter street/house number',
    'phone_number': 'Phone Number',
    'enter_phone': 'Enter phone number',
    'barangay': 'Barangay',
    'enter_barangay': 'Enter barangay',
    'city': 'City',
    'enter_city': 'Enter city',
    'voucher_applied': 'Voucher Applied!',
    'discount_applied': 'discount has been applied to your order',
    'invalid_voucher': 'Invalid Voucher',
    'voucher_expired': 'This voucher has expired',
    'voucher_not_active': 'This voucher is not yet active',
    'minimum_purchase_not_met': 'Minimum Purchase Not Met',
    'voucher_limit_reached': 'Voucher Limit Reached',
    'missing_information': 'Missing Information',
    'fill_all_fields': 'Please fill in all address fields',
    'order_placed_success': 'Order Placed Successfully!',
    'order_placed_description': 'Your order has been placed',
    'order_failed': 'Order Failed',
    'error_placing_order': 'There was an error placing your order. Please try again.',
    'insufficient_stock': 'Insufficient Stock',
    'loading_checkout': 'Loading checkout...',
    'no_items_checkout': 'No items to checkout',
    'no_items_selected': 'No items selected',
    'select_item_checkout': 'Please select at least one item to checkout',
    
    // Orders & Purchases
    'my_purchases': 'My Purchases',
    'my_purchase': 'My Purchase',
    'order_history': 'Order History',
    'to_pay': 'To Pay',
    'to_ship': 'To Ship',
    'to_receive': 'To Receive',
    'completed': 'Completed',
    'cancelled': 'Cancelled',
    'pending_cancellation': 'Pending Cancellation',
    'return_refund': 'Return/Refund',
    'order_number': 'Order Number',
    'order_date': 'Order Date',
    'order_status': 'Order Status',
    'order_total': 'Order Total',
    'total_amount': 'Total Amount',
    'view_order': 'View Order',
    'view_order_details': 'View Details',
    'cancel_order': 'Cancel Order',
    'rate_order': 'Rate Order',
    'buy_again': 'Buy Again',
    'confirm_received': 'Confirm Received',
    'no_orders': 'No orders yet',
    'no_orders_found': 'No orders found for',
    'start_shopping': 'Start shopping to see your orders here',
    'loading_orders': 'Loading your orders...',
    'cancellation_request_submitted': 'Cancellation Request Submitted',
    'cancellation_submitted_desc': 'Your cancellation request has been submitted for admin approval.',
    
    // Admin Panel
    'admin_panel': 'Admin Panel',
    'manage_app_content': 'Manage your app content',
    'loading_admin': 'Loading Admin Dashboard',
    'verifying_permissions': 'Verifying permissions...',
    'access_denied': 'Access Denied',
    'no_admin_privileges': "You don't have admin privileges.",
    'users': 'Users',
    'orders': 'Orders',
    'analytics': 'Analytics',
    'stock': 'Stock',
    'vouchers': 'Vouchers',
    'carousel': 'Carousel',
    'forum_moderation': 'Forum',
    'community': 'Community',
    'cancellations': 'Cancellations',
    'total_users': 'Total Users',
    'total_orders': 'Total Orders',
    'total_revenue': 'Total Revenue',
    'total_sales': 'Total Sales',
    'total_products': 'Total Products',
    'pending_orders': 'Pending Orders',
    'active_products': 'Active Products',
    'published_news': 'Published News',
    'add_news': 'Add News',
    'add_product': 'Add Product',
    'edit_news': 'Edit News',
    'edit_product': 'Edit Product',
    'delete_news': 'Delete News',
    'delete_product': 'Delete Product',
    'published': 'Published',
    'unpublished': 'Unpublished',
    'active': 'Active',
    'inactive': 'Inactive',
    'all_orders': 'All',
    'unpaid': 'Unpaid',
    'shipping_status': 'Shipping',
    'return_cancel': 'Return & Cancel',
    'time_filter': 'Time Filter',
    'weekly': 'Weekly',
    'monthly': 'Monthly',
    'custom_range': 'Custom Range',
    'start_date': 'Start Date',
    'end_date': 'End Date',
    'save_data': 'Save Data',
    'total_profit': 'Total Profit',
    'products_ordered': 'Products Ordered',
    'approve': 'Approve',
    'reject': 'Reject',
    'make_admin': 'Make Admin',
    'remove_admin': 'Remove Admin',
    'user_role': 'User Role',
    'admin': 'Admin',
    'user': 'User',
    'field_technician': 'Field Technician',
    'profanity_filter': 'Profanity Filter',
    'add_word': 'Add Word',
    'severity': 'Severity',
    'low': 'Low',
    'medium': 'Medium',
    'high': 'High',
    'monthly_sales': 'Monthly Sales',
    'discount_percentage': 'Discount Percentage',
    'valid_date': 'Valid Date',
    'status_active': 'Active',
    'status_inactive': 'Inactive',
    'upload_carousel_image': 'Upload Image',
    'display_order': 'Display Order',
    'stock_quantity': 'Stock Quantity',
    'low_stock_threshold': 'Low Stock Threshold',
    'update_stock': 'Update Stock',
    
    // Common Actions
    'save': 'Save',
    'cancel': 'Cancel',
    'confirm': 'Confirm',
    'close': 'Close',
    'back': 'Back',
    'next': 'Next',
    'submit': 'Submit',
    'search': 'Search',
    'filter': 'Filter',
    'sort': 'Sort',
    'refresh': 'Refresh',
    'loading': 'Loading...',
    'error': 'Error',
    'success': 'Success',
    'warning': 'Warning',
    'info': 'Info',
    'yes': 'Yes',
    'no': 'No',
    'ok': 'OK',
    'done': 'Done',
    'update': 'Update',
    'create': 'Create',
    'add': 'Add',
    'calling': 'Calling...',
    'initiating_call': 'Initiating call to',
    
    // Notifications & Alerts
    'notification': 'Notification',
    'no_notifications': 'No notifications',
    'mark_all_read': 'Mark all as read',
    
    // Auth
    'login': 'Log In',
    'signup': 'Sign Up',
    'logout': 'Log Out',
    'email': 'Email',
    'password': 'Password',
    'forgot_password': 'Forgot Password?',
    'create_account': 'Create Account',
    'already_have_account': 'Already have an account?',
    'dont_have_account': "Don't have an account?",
    
    // Inbox
    'inbox': 'Inbox',
    'messages': 'Messages',
    'no_messages': 'No messages yet',
    'send_message': 'Send Message',
    'type_message': 'Type a message...',
    
    // Help Centre
    'help_center': 'Help Centre',
    'faq': 'FAQ',
    'contact_us': 'Contact Us',
    'support': 'Support',
    'call_now': 'Call Now',
    'email_us': 'Email Us',
    
    // Miscellaneous
    'all': 'All',
    'today': 'Today',
    'yesterday': 'Yesterday',
    'this_week': 'This Week',
    'this_month': 'This Month',
    'custom': 'Custom',
    'from': 'From',
    'to': 'To',
    'date': 'Date',
    'time': 'Time',
    'amount': 'Amount',
    'status': 'Status',
    'action': 'Action',
    'details': 'Details',
    'description': 'Description',
    'name': 'Name',
    'phone': 'Phone',
    'address': 'Address',
    'items': 'items',
    'of': 'of',
    'selected': 'selected',
  },
  tagalog: {
    // Navigation
    'nav_news': 'Balita',
    'nav_products': 'Produkto',
    'nav_community': 'Komunidad',
    'nav_profile': 'Profile',
    'nav_scanner': 'Scanner',
    
    // Home
    'latest_news': 'Pinakabagong Balita',
    'featured_products': 'Mga Tampok na Produkto',
    'view_all': 'Tingnan Lahat',
    'read_more': 'Magbasa Pa',
    'welcome': 'Maligayang Pagdating',
    'dashboard': 'Dashboard',
    'search_news': 'Maghanap ng balita...',
    'todays_weather': 'Panahon Ngayon',
    'choose_your_date': 'Pumili ng Petsa',
    'pick_a_date': 'Pumili ng petsa',
    'date_range': 'Saklaw ng petsa',
    'trending_topics': 'Mga Trending na Paksa',
    'welcome_to_gemini': 'Maligayang Pagdating sa Gemini',
    'latest_insights': 'Pinakabagong balita at kaalaman para sa mga magsasakang Pilipino',
    
    // Products
    'products': 'Mga Produkto',
    'our_products': 'Aming mga Produkto',
    'search_products': 'Maghanap ng produkto...',
    'search_products_placeholder': 'Maghanap ng produkto (hal., pataba, organic, pestisidyo)...',
    'all_categories': 'Lahat ng Kategorya',
    'price_range': 'Saklaw ng Presyo',
    'apply_filters': 'Gamitin ang mga Filter',
    'clear_filters': 'Burahin ang mga Filter',
    'add_to_cart': 'Idagdag sa Cart',
    'view_details': 'Tingnan ang Detalye',
    'filters': 'Mga Filter',
    'relevance': 'Kaugnayan',
    'price_low_high': 'Presyo: Mababa hanggang Mataas',
    'price_high_low': 'Presyo: Mataas hanggang Mababa',
    'highest_rated': 'Pinakamataas na Rating',
    'most_reviewed': 'Pinaka-maraming Review',
    'in_stock_only': 'May stock lamang',
    'premium_solutions': 'Premium na solusyong pang-agrikultura para sa mga magsasakang Pilipino',
    'need_help': 'Kailangan ng Tulong?',
    'contact_technician': 'Makipag-ugnayan sa aming mga field technician para sa rekomendasyon ng produkto',
    'talk_to_technician': 'Makipag-usap sa Technician',
    'out_of_stock': 'Wala nang Stock',
    'low_stock': 'Mababang Stock',
    'items_left': 'natitirang item',
    'no_products_found': 'Walang nahanap na produkto',
    'try_different_search': 'Subukan ang ibang paghahanap o filter',
    'field_technicians': 'Mga Field Technician',
    'call_technician': 'Tawagan ang Technician',
    'region': 'Rehiyon',
    
    // Forum
    'community_forum': 'Forum ng Komunidad',
    'create_post': 'Lumikha ng Post',
    'search_posts': 'Maghanap ng mga post...',
    'post_title': 'Pamagat ng Post',
    'write_content': 'Isulat ang inyong nilalaman dito...',
    'publish': 'I-publish',
    'like': 'Like',
    'comment': 'Komento',
    'reply': 'Tumugon',
    'share': 'I-share',
    'delete': 'Burahin',
    'edit': 'I-edit',
    'write_a_comment': 'Sumulat ng komento...',
    'posting': 'Nagpo-post...',
    'post': 'Post',
    'comments': 'Mga Komento',
    'no_posts': 'Wala pang mga post',
    'be_first_to_post': 'Maging una na mag-share ng isang bagay sa komunidad!',
    'share_post': 'I-share ang post na ito',
    'copy_link': 'Kopyahin ang Link',
    'link_copied': 'Nakopya na ang link!',
    'add_images': 'Magdagdag ng Larawan',
    'whats_on_your_mind': 'Ano ang nasa isip mo?',
    'share_thoughts': 'Ibahagi ang iyong mga kaisipan, tanong, o tip sa komunidad ng pagsasaka',
    'pull_to_refresh': 'Hilahin para i-refresh',
    'refreshing': 'Nire-refresh...',
    'add_reaction': 'Magdagdag ng reaksyon',
    'view_comments': 'Tingnan ang mga komento',
    
    // Plant Scanner
    'plant_scanner': 'Scanner ng Halaman',
    'scan_plant': 'I-scan ang Halaman',
    'take_photo': 'Kumuha ng Larawan',
    'upload_image': 'Mag-upload ng Larawan',
    'analyze': 'Suriin',
    'disease_detection_results': 'Resulta ng Pagtukoy ng Sakit',
    'treatment_recommendations': 'Mga Rekomendasyon sa Paggamot',
    'recommended_products': 'Mga Inirerekomendang Produkto',
    'scan_credits': 'Mga Credit sa Pag-scan',
    'credits_remaining': 'natitirang credit',
    'buy_more_credits': 'Bumili ng Dagdag na Credit',
    'scanning': 'Nag-i-scan...',
    'analyzing_plant': 'Sinusuri ang iyong halaman...',
    'scan_history': 'Kasaysayan ng Pag-scan',
    'no_scans_yet': 'Wala pang mga scan',
    'start_scanning': 'Magsimula sa pag-scan ng halaman para matukoy ang mga sakit',
    
    // Profile
    'profile': 'Profile',
    'edit_profile': 'I-edit ang Profile',
    'save_profile': 'I-save ang Profile',
    'favourites': 'Mga Paborito',
    'downloads': 'Mga Download',
    'language': 'Wika',
    'location': 'Lokasyon',
    'display': 'Display',
    'feed_preference': 'Kagustuhan sa Feed',
    'subscription': 'Subscription',
    'clear_cache': 'Linisin ang Cache',
    'clear_history': 'Linisin ang Kasaysayan',
    'log_out': 'Mag-log Out',
    'admin_dashboard': 'Admin Dashboard',
    'member_since': 'Miyembro Mula',
    'current_streak': 'Kasalukuyang Streak',
    'days': 'araw',
    'earned_points': 'Nakuhang Puntos',
    'points': 'puntos',
    'achievements': 'Mga Achievement',
    'activity': 'Aktibidad',
    'biometric_login': 'Biometric Login',
    'enable_biometric': 'I-enable ang Face ID/Fingerprint',
    'disable_biometric': 'I-disable ang Biometric',
    'rate_app': 'I-rate ang App',
    'help_centre': 'Help Centre',
    'privacy_policy': 'Patakaran sa Privacy',
    
    // Settings
    'settings': 'Mga Setting',
    'theme': 'Tema',
    'dark_theme_active': 'Aktibo ang dark theme',
    'light_theme_active': 'Aktibo ang light theme',
    'following_system': 'Sumusunod sa system',
    'light': 'Maliwanag',
    'dark': 'Madilim',
    'system': 'Sistema',
    'select_app_language': 'Pumili ng wika ng app',
    'notifications': 'Mga Notification',
    'manage_alert_preferences': 'Pamahalaan ang mga kagustuhan sa alerto',
    'order_updates': 'Mga Update sa Order',
    'promotions': 'Mga Promosyon',
    'community_alerts': 'Mga Alerto sa Komunidad',
    'news_updates': 'Mga Update sa Balita',
    'privacy_security': 'Privacy at Seguridad',
    'manage_your_data': 'Pamahalaan ang iyong data',
    'data_encrypted': 'Naka-encrypt ang data sa pahinga',
    'secure_connection': 'Secure na koneksyon (SSL)',
    'two_factor_available': 'Available ang two-factor authentication',
    'account_management': 'Pamamahala ng Account',
    'manage_your_account': 'Pamahalaan ang iyong account',
    'app_version': 'Bersyon ng App',
    
    // News
    'news': 'Balita',
    'latest_updates': 'Pinakabagong Update',
    'read_full_article': 'Basahin ang Buong Artikulo',
    'related_articles': 'Mga Kaugnay na Artikulo',
    'share_article': 'I-share ang Artikulo',
    'views': 'tanawin',
    'min_read': 'min na pagbabasa',
    
    // Cart & Checkout
    'cart': 'Cart',
    'your_cart': 'Ang Iyong Cart',
    'cart_empty': 'Walang laman ang iyong cart',
    'add_products_to_start': 'Magdagdag ng mga produkto para magsimula',
    'continue_shopping': 'Magpatuloy sa Pamimili',
    'checkout': 'Checkout',
    'subtotal': 'Subtotal',
    'shipping': 'Pagpapadala',
    'shipping_fee': 'Bayad sa Pagpapadala',
    'free': 'Libre',
    'total': 'Kabuuan',
    'place_order': 'Mag-order',
    'payment_method': 'Paraan ng Pagbabayad',
    'cash_on_delivery': 'Cash on Delivery',
    'gcash': 'GCash',
    'bank_transfer': 'Bank Transfer',
    'shipping_address': 'Address ng Pagpapadala',
    'delivery_address': 'Address ng Paghahatid',
    'order_notes': 'Mga Tala sa Order',
    'delivery_notes': 'Mga Tala sa Paghahatid (Opsyonal)',
    'delivery_instructions': 'Magdagdag ng espesyal na tagubilin sa paghahatid...',
    'apply_voucher': 'Gamitin ang Voucher',
    'voucher_code': 'Code ng Voucher',
    'enter_voucher_code': 'Ilagay ang voucher code (hal., 1.1, 2.2, WELCOME10)',
    'apply': 'Gamitin',
    'remove': 'Alisin',
    'quantity': 'Dami',
    'qty': 'Qty',
    'select_all': 'Piliin Lahat',
    'items_selected': 'mga item na napili',
    'clear_all': 'Burahin Lahat',
    'proceed_to_checkout': 'Magpatuloy sa Checkout',
    'order_summary': 'Buod ng Order',
    'street_house_number': 'Kalye/Numero ng Bahay',
    'enter_street': 'Ilagay ang kalye/numero ng bahay',
    'phone_number': 'Numero ng Telepono',
    'enter_phone': 'Ilagay ang numero ng telepono',
    'barangay': 'Barangay',
    'enter_barangay': 'Ilagay ang barangay',
    'city': 'Lungsod',
    'enter_city': 'Ilagay ang lungsod',
    'voucher_applied': 'Ginamit ang Voucher!',
    'discount_applied': 'diskwento ang naidagdag sa iyong order',
    'invalid_voucher': 'Hindi Valid na Voucher',
    'voucher_expired': 'Ang voucher na ito ay expired na',
    'voucher_not_active': 'Ang voucher na ito ay hindi pa aktibo',
    'minimum_purchase_not_met': 'Hindi Nakaabot sa Minimum na Pagbili',
    'voucher_limit_reached': 'Naabot na ang Limitasyon ng Voucher',
    'missing_information': 'Kulang ang Impormasyon',
    'fill_all_fields': 'Mangyaring punan ang lahat ng field ng address',
    'order_placed_success': 'Matagumpay na Nailagay ang Order!',
    'order_placed_description': 'Nailagay na ang iyong order',
    'order_failed': 'Nabigo ang Order',
    'error_placing_order': 'Nagkaroon ng error sa pag-order. Subukan ulit.',
    'insufficient_stock': 'Hindi Sapat ang Stock',
    'loading_checkout': 'Naglo-load ang checkout...',
    'no_items_checkout': 'Walang mga item na i-checkout',
    'no_items_selected': 'Walang napiling item',
    'select_item_checkout': 'Mangyaring pumili ng kahit isang item para i-checkout',
    
    // Orders & Purchases
    'my_purchases': 'Aking mga Binili',
    'my_purchase': 'Aking Binili',
    'order_history': 'Kasaysayan ng Order',
    'to_pay': 'Babayaran',
    'to_ship': 'Ipapadala',
    'to_receive': 'Tatanggapin',
    'completed': 'Nakumpleto',
    'cancelled': 'Kinansela',
    'pending_cancellation': 'Pending na Pagkansela',
    'return_refund': 'Ibalik/Refund',
    'order_number': 'Numero ng Order',
    'order_date': 'Petsa ng Order',
    'order_status': 'Status ng Order',
    'order_total': 'Kabuuang Order',
    'total_amount': 'Kabuuang Halaga',
    'view_order': 'Tingnan ang Order',
    'view_order_details': 'Tingnan ang Detalye',
    'cancel_order': 'Kanselahin ang Order',
    'rate_order': 'I-rate ang Order',
    'buy_again': 'Bumili Ulit',
    'confirm_received': 'Kumpirmahin na Natanggap',
    'no_orders': 'Wala pang mga order',
    'no_orders_found': 'Walang nahanap na order para sa',
    'start_shopping': 'Magsimulang mamili para makita ang iyong mga order dito',
    'loading_orders': 'Naglo-load ang iyong mga order...',
    'cancellation_request_submitted': 'Naisumite ang Kahilingan sa Pagkansela',
    'cancellation_submitted_desc': 'Ang iyong kahilingan sa pagkansela ay naisumite na para sa pag-apruba ng admin.',
    
    // Admin Panel
    'admin_panel': 'Admin Panel',
    'manage_app_content': 'Pamahalaan ang nilalaman ng app',
    'loading_admin': 'Naglo-load ang Admin Dashboard',
    'verifying_permissions': 'Vine-verify ang mga pahintulot...',
    'access_denied': 'Hindi Pinapayagan',
    'no_admin_privileges': 'Wala kang admin privileges.',
    'users': 'Mga User',
    'orders': 'Mga Order',
    'analytics': 'Analytics',
    'stock': 'Stock',
    'vouchers': 'Mga Voucher',
    'carousel': 'Carousel',
    'forum_moderation': 'Forum',
    'community': 'Komunidad',
    'cancellations': 'Mga Pagkansela',
    'total_users': 'Kabuuang User',
    'total_orders': 'Kabuuang Order',
    'total_revenue': 'Kabuuang Kita',
    'total_sales': 'Kabuuang Benta',
    'total_products': 'Kabuuang Produkto',
    'pending_orders': 'Mga Pending na Order',
    'active_products': 'Mga Aktibong Produkto',
    'published_news': 'Nai-publish na Balita',
    'add_news': 'Magdagdag ng Balita',
    'add_product': 'Magdagdag ng Produkto',
    'edit_news': 'I-edit ang Balita',
    'edit_product': 'I-edit ang Produkto',
    'delete_news': 'Burahin ang Balita',
    'delete_product': 'Burahin ang Produkto',
    'published': 'Nai-publish',
    'unpublished': 'Hindi Nai-publish',
    'active': 'Aktibo',
    'inactive': 'Hindi Aktibo',
    'all_orders': 'Lahat',
    'unpaid': 'Hindi pa Bayad',
    'shipping_status': 'Nagpapadala',
    'return_cancel': 'Ibalik at Kansela',
    'time_filter': 'Filter ng Oras',
    'weekly': 'Lingguhan',
    'monthly': 'Buwanan',
    'custom_range': 'Custom na Saklaw',
    'start_date': 'Petsa ng Simula',
    'end_date': 'Petsa ng Katapusan',
    'save_data': 'I-save ang Data',
    'total_profit': 'Kabuuang Kita',
    'products_ordered': 'Mga Produktong Inorder',
    'approve': 'Aprubahan',
    'reject': 'Tanggihan',
    'make_admin': 'Gawing Admin',
    'remove_admin': 'Alisin ang Admin',
    'user_role': 'Role ng User',
    'admin': 'Admin',
    'user': 'User',
    'field_technician': 'Field Technician',
    'profanity_filter': 'Filter ng Malaswang Salita',
    'add_word': 'Magdagdag ng Salita',
    'severity': 'Kalubhaan',
    'low': 'Mababa',
    'medium': 'Katamtaman',
    'high': 'Mataas',
    'monthly_sales': 'Buwanang Benta',
    'discount_percentage': 'Porsyento ng Diskwento',
    'valid_date': 'Petsa ng Validity',
    'status_active': 'Aktibo',
    'status_inactive': 'Hindi Aktibo',
    'upload_carousel_image': 'Mag-upload ng Larawan',
    'display_order': 'Ayos ng Display',
    'stock_quantity': 'Dami ng Stock',
    'low_stock_threshold': 'Threshold ng Mababang Stock',
    'update_stock': 'I-update ang Stock',
    
    // Common Actions
    'save': 'I-save',
    'cancel': 'Kanselahin',
    'confirm': 'Kumpirmahin',
    'close': 'Isara',
    'back': 'Bumalik',
    'next': 'Susunod',
    'submit': 'Isumite',
    'search': 'Maghanap',
    'filter': 'Filter',
    'sort': 'Ayusin',
    'refresh': 'I-refresh',
    'loading': 'Naglo-load...',
    'error': 'Error',
    'success': 'Tagumpay',
    'warning': 'Babala',
    'info': 'Impormasyon',
    'yes': 'Oo',
    'no': 'Hindi',
    'ok': 'OK',
    'done': 'Tapos na',
    'update': 'I-update',
    'create': 'Lumikha',
    'add': 'Magdagdag',
    'calling': 'Tumatawag...',
    'initiating_call': 'Nagsisimula ng tawag sa',
    
    // Notifications & Alerts
    'notification': 'Notification',
    'no_notifications': 'Walang notification',
    'mark_all_read': 'Markahan lahat bilang nabasa',
    
    // Auth
    'login': 'Mag-log In',
    'signup': 'Mag-sign Up',
    'logout': 'Mag-log Out',
    'email': 'Email',
    'password': 'Password',
    'forgot_password': 'Nakalimutan ang Password?',
    'create_account': 'Lumikha ng Account',
    'already_have_account': 'May account ka na?',
    'dont_have_account': 'Wala ka pang account?',
    
    // Inbox
    'inbox': 'Inbox',
    'messages': 'Mga Mensahe',
    'no_messages': 'Wala pang mga mensahe',
    'send_message': 'Magpadala ng Mensahe',
    'type_message': 'Mag-type ng mensahe...',
    
    // Help Centre
    'help_center': 'Help Centre',
    'faq': 'FAQ',
    'contact_us': 'Makipag-ugnayan',
    'support': 'Suporta',
    'call_now': 'Tumawag Ngayon',
    'email_us': 'Mag-email sa Amin',
    
    // Miscellaneous
    'all': 'Lahat',
    'today': 'Ngayon',
    'yesterday': 'Kahapon',
    'this_week': 'Ngayong Linggo',
    'this_month': 'Ngayong Buwan',
    'custom': 'Custom',
    'from': 'Mula',
    'to': 'Hanggang',
    'date': 'Petsa',
    'time': 'Oras',
    'amount': 'Halaga',
    'status': 'Status',
    'action': 'Aksyon',
    'details': 'Mga Detalye',
    'description': 'Paglalarawan',
    'name': 'Pangalan',
    'phone': 'Telepono',
    'address': 'Address',
    'items': 'mga item',
    'of': 'ng',
    'selected': 'napili',
  },
};

export const TranslationProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [language, setLanguageState] = useState(() => {
    // Check both storage keys for compatibility
    return localStorage.getItem('selectedLanguage') || localStorage.getItem('selected_language') || 'english';
  });

  // Sync language to localStorage whenever it changes
  useEffect(() => {
    localStorage.setItem('selectedLanguage', language);
    localStorage.setItem('selected_language', language);
  }, [language]);

  // Listen for storage changes from other components
  useEffect(() => {
    const handleStorageChange = () => {
      const storedLanguage = localStorage.getItem('selectedLanguage') || localStorage.getItem('selected_language') || 'english';
      if (storedLanguage !== language) {
        setLanguageState(storedLanguage);
      }
    };

    // Check for changes periodically (for same-tab updates)
    const interval = setInterval(handleStorageChange, 100);
    
    // Also listen for storage events (for cross-tab updates)
    window.addEventListener('storage', handleStorageChange);
    
    return () => {
      clearInterval(interval);
      window.removeEventListener('storage', handleStorageChange);
    };
  }, [language]);

  const setLanguage = useCallback((lang: string) => {
    setLanguageState(lang);
    localStorage.setItem('selectedLanguage', lang);
    localStorage.setItem('selected_language', lang);
  }, []);

  // Simple translation function
  const t = useCallback((key: string): string => {
    const langTranslations = translations[language] || translations.english;
    return langTranslations[key] || translations.english[key] || key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
  }, [language]);

  return (
    <TranslationContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </TranslationContext.Provider>
  );
};

export const useTranslation = () => {
  const context = useContext(TranslationContext);
  if (context === undefined) {
    throw new Error('useTranslation must be used within a TranslationProvider');
  }
  return context;
};

// Legacy compatibility - keep old function name
export const useTranslate = useTranslation;
